# -
介绍网络的基本概念以及其中运用的一些攻击与原理

# 网络基本概念
## Ip:
每一个终端的一个地址，ipv4有32位，通常有四段，每一段用一个十进制数表示。如：192.168.1.1 ipv6有128，使用冒号十六进制记法。通常有八段，每段用4个十六进制数表示。
子网掩码：主要作业，划分网段。其中1表示网络号，0表示主机号。

## Mac地址：
网卡芯片上的一个固定标识，全球唯一。有58位，通常用12个十六进制数表示。前一半是产商的标识。网卡之间通过mac相互识别，一个网卡要把数据送到另一个网卡，就必须知道另一个网卡的mac地址

## Arp：地址解析协议。

### Arp解析原理：
源主机A发送一个arp广播包，其中

报头：A 的mac  -->  广播（FFFFFFFFFFFF）

数据：sender ip 和sender mac 是源主机的ip和mac

Target ip 是要查询的ip，target mac全0

目标主机B回应一个单播包

报头：  B的mac --> A 的mac

数据： sender ip和sender mac目标主机B的ip和mac

Target ip 和target mac 是之前源主机A的ip和mac
   
源主机A收到这个回应包，会把sender ip和sender mac写入自己的arp缓存表。

### ARP欺骗攻击：
第一步：被攻击者开始只知道网关的ip，不知道网关的mac地址，所以发送一个arp广播包问网关的mac地址是多少。

第二步：攻击者开始欺骗，向被攻击者发送欺骗包其中源ip是网关的ip，源mac是攻击者的mac。（会发送多个这样的包，覆盖网关回应的正确包）
目标ip与目标mac是被攻击者的ip与mac。如图：

第三步：被攻击者发送包给交换机时，交换机发现mac是攻击者的mac地址时，就将数据包发送给攻击者。
第四步：攻击者收到被攻击者的包就可以为所欲为，可以丢弃也可以转发给网关，甚者可以更改。

## 交换机（二层）的工作原理：
功能：实现同一网段的主机通信，学习过滤转发的功能。
工作原理：当一台主机与A另一台主机B通信时，交换机会先学习A主机的mac地址与对应的接口，存入mac表中。然后在mac表中查看主机B的是否存在，如果存在则根据mac表进行转发，如果不存在则进行洪泛，即除来源接口向所有接口广播。

三层交换机，没有nat功能，路由器才有
三层交换机，没有异构网络互联比如ppp---以太网连接功能，三层交换机没有，路由器才有
只看功能：
三层交换机可以完全代替二层交换机
三层交换机在部分场景（只需要做路由），可以代替路由器。需要用nat，需要异构网络互联不能代替路由器。

## Mac泛洪攻击，
利用到交换机正常工作的原理
让交换机的mac表溢出，占满mac表的容量 
所以数据只能泛洪，偷窥者就截获其他人的报文
最常见的mac泛洪攻击工具，kali自带mac泛洪攻击软件
 
macof - flood a switched LAN with random MAC addresses
 
用随机的mac地址，对交换网络进行泛洪攻击

//----------------------------------------------------------------------------



## Vlan：虚拟局域网，是隔离技术
通过vlan可以实现
广播隔离，避免我们的笔记本电脑，收到太多没有必要的广播包，浪费我们的带宽，电脑的性能资源
故障隔离，避免网络中出现arp攻击，dhcp私设（比如家用小腾达乱发地址），这些网络故障，影响范围过大  
  
## Osi/rm
应用层：面向用户的数据，图片，文字，音乐

表示层：用户的数据，用计算机编码来表示，jpeg，mp3，mpeg，怎么买用计算机编码来表示用户看到的听到

会话层：程序之间的会话，api

//上面三层，和网络关系不大，没涉及到包怎么买走，编码自己编，程序接口自己在软件开发上把接口做好
 
传输层：给数据包，打上端口号,以及确定使用tcp还是udp传输。

网络层：给数据包，打上ip地址，进行路由

数据链路层：给数据包，打上mac地址，进行交换

物理层：把数据包，用物理信号表示出来，定义了怎么用电流来表示数据在网线中传输，后者怎么用无线电磁波来表示数据，在空气中传输
 
 
 
端口号，用来标记，一个数据包属于什么应用

我pc就1个ip，同时在开网页，听歌，下载，聊天，同时收到好几种不同的包

哪个包，是哪个应用，收到后该放到浏览器，放到qq，用端口号来标识
 
打着80的数据包，是个网页的包，放到浏览器
打着4000的包，是个qq的包，放到qq
 
传输层

给数据包打上端口号，标识这个包是哪个应用的

建立可靠的连接（tcp），或者不可靠但是速度快的连接（udp）
 
Udp的特点：①是无连接，尽最大努力交付，速度快。②面向报文。③没有拥赛控制。④支持一对一，一对多，多对一，多对多的交互通信。⑤首部开销小。

Tcp的特点：①可靠，为了保证可靠，延迟高一点。②面向字节流。③点对点通信。④提供全双工通信。
 
Tcp的应用：邮件，发附件，word附件。发文件的时候，在传输的时候，对完整性，要求很高。

Udp
视频语音聊天，传输的本来就不是固定文件，视频流，摄像头边采集边传送，不是文件，对完整性要求不高。

